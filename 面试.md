### [校招和社招的区别](https://www.nowcoder.com/discuss/424682?type=post&order=time&pos=&page=1&channel=0&source_id=search_post&subType=2)：
- 校招
1. 看重基础，全方位无死角的考察各位的基础知识点，并且一般考察XXX是什么？XXX怎么实现的？
2. 算法可能会比较难一点，

- 社招
1. 项目。考察至少占到了一半，2面或者3面会针对项目做一个详细的沟通与了解，
 包括整个项目的业务架构，技术架构和技术难点和卡点等，对于同一个知识点，比校招多了为什么要这么实现
2. 算法。社招因为看重项目和技术的深度，限于时间，所以算法考察会相对简单一点。


- 二面面试官得重头戏还是你对项目的理解。
本轮面试会让你继续讲解一个或者多个项目，因为没有了基础知识点的考察“压力”。
如果你可以在回答中表现出自己良好的解决实际线上故障的能力与水平，
并且在实际的工作中对一些方向有进行过深入的了解，那么你的面试之路将会顺利许多。
面试官会对项目进行深入了解，包括其业务架构，技术架构与技术原理等。大概包括如下的技术点：
1. 项目业务架构，针对项目中各个知识点进行扩展与提问
2. 项目技术架构，技术架构中比如说Thrift的实现原理，nginx相关知识点等
3. 项目中学到了哪些技术？或者之前学到的技术哪些在项目中可以体现？
4. 服务的QPS如何？如何保证服务高可用性？(目前时tps=1，即晚上8小时，3w单，每秒一单。压测支持40单。)
5. 如何限流，熔断和降级服务？
6. 服务的部署方式，各个集群数据库的同步方式
7. MySQL单表数据量多大？索引结构如何？
8. 上线新服务如何进行压测？
9. 内存泄露的排查方式？
10. 线上接口响应超时的排查思路

- 三面
主要考察的方向包括：
1. 为什么出来看机会？
2. 原公司团队的一些基本情况
3. 项目的简单介绍
4. 开放性的系统设计题目：
排队系统
点餐系统
停车场系统

未来的职业规划
有什么兴趣爱好
你还有什么想要了解的呢？



###############################

1. 自我介绍
    1. 我叫***，2017年从**硕士毕业，到目前为止有两段工作经历：
    第一段：一家互联网金融公司简理财。主要负责是资产端和后台管理，工作内容包括
            各形式的资产入库：资产在业务上的流转，计息等。
            后台管理，包括资产操作和展示。
            还有一部分技术需求，sql优化，代码部分重构等。
    第二段： 去了第二家公司，我主要负责的是
            订单实时交易流程管理： 从下单到订单成交的一系列流程等。
             也是有一些业务需求，技术需求等。
            
            
2. 为什么离职
    1. 从第一家离职，
        1. 当时互联网金融行业整体下行，资产坏账率上升
        2. 公司运用的技术基本掌握，技术成长不明显，对自己有一个高的期望
    2. 从第二家离职：
        1. 公司用的技术不多,很多技术都没用，自己技术也达到了一个瓶颈，
        2. 由于国内玩美股的人不是很多，并发不是很高，很多技术用不上

3. 项目最有挑战的点：    你做了什么，为什么要这么做，用了什么技术要解决什么问题？
    1. 消息顺序性需求描述，
        0. 由于订单的特殊性，必须保证单一用户订单的顺序性。(同一个用户的执行报告，接受时必须有序，否则报错)
        1. 我们有3个模块，各个模块之间通过rabbitmq来进行通信
        2. 订单到来时，site模块收到订单并落库后，通过rabbitmq发送给trade模块
                     trade模块收到消息，并进行处理后，通过rabbtimq 发送给 oes模块。
        3. 在trade的consumer先消费后生产的过程中，可能出现乱序， 
            比如accountId=1的用户订单，trade在消费后，使用rabbitTemplate进行发送时，调用底层的channel池，
            随机拿一channel进行发送，这样导致该用户的前后两个订单到达oes时间不定 
    1.2. rabbitmq问题解决
        1. 继承原生类，自定义一个channel池，当发送时，从自定义池子中拿channel
           自定义池是一个k-v的hashmap，k是channel的唯一标示,，v是channel。
           当consumer发送用户订单时，根据routingkey获取对应channel。
    1.3. 问题难点：
        0. 问题定位和解决都比较难，网上没有这方面的文章，不是每次都乱序，需要看源码， 
        1. 需要保证channel的声明周期，不发生内存泄漏；继承原生api；
        2. 并发导致的内存泄漏问题：并发过程中，如果Thread1获取channel1，发现他关闭了，需要生成一个channel替换；
             并发的又有个Thread2进行同样操作，则会多一个channel未关闭，使用锁；      
      
    2.1. 系统水平扩容问题需求描述
        0. 现状，系统高峰时qps=10，最高允许qps=40。
        1. 模块间通过mq松耦合在一起，正常情况下扩容时加减consumer机器就可以了。
        2. 由于订单顺序性问题，对rabbitmq的生产者和消费者进行了改写，queue和consumer需要感知对方。
    2.2. 问题解决
        1. 使用配置文件，提前定好queue和consumer数量
    2.3. 问题难点
        1. 业务梳理问题，改为无状态服务.
              1. 我们大量使用了rabbitmq， 在应用内哪些队列需要进行扩容，哪些不需要扩容
              2. 找出存在并发竞争的点，有一个定时任务，统一迁移出去，防止多台机器竞争， 
              3. accountId的问题, 一个用accountId，一个用orderId，存在死锁冲突
              4. 我们对rabbitmq进行了二次开发，每个机器都有4个队列，只是配置了4，当多台机器时，每台机器性能不一样，所以需要修改。
              5. 在common包中修改，兼容性问题
              6. 确定扩容是不是可以随时扩容还是必须等休市时。
              7. 启动问题，谁先启动。
        2. 与原有代码兼容, 有些地方是公共代码，有些会出问题，zk路径节点问题。

    3： 多国语言配置。(小需求)
        resourceBundleMessageSource
        使用了composite聚合各个source，使用类似责任链的方式。
   
    4. 暴露交易接口，我们作为第三方交易所，提供接口给下游使用。
     1.这个需求的难点在于：
        1.1. 业务复杂性，保证订单幂等；
             在我们系统中，订单通过orderId唯一确定。
             在fix协议中，使用client orderId和 origin client orderId来确定。
             在下单时，只有一个client orderId。在改撤单时，有两个字段。
             在改撤单时，有复杂的情况， 需要判断
        1.2 发送消息时，需要保证可靠性
     2.收获
       1. 需求方案设计。需求不是很难，就是一个业务上的需求。但是3个模块都覆盖到了，所有有些点没有考虑到，写时才考虑到。
       2. 分步上线。代码改动还是比较大。
   
四：面试时可能感兴趣的点
1. 交易时资产如何变化
   1. 下单时只是新增一个订单，资产表不做变化。(用户查询时每次都要重新聚合asset)
   2. 订单有部分成交时， 修改资产表的Locked(剩余未成交)字段和unsettled(已成交未结算)字段。
2. 交易时订单状态如何变化

五： 公司项目的总体架构
    1. 业务上来说分为：实时交易模块，风控模块， 账户模块， 对账模块；
    2. 采用的技术栈为：
        2.1 spring-boot + finagle/dubbo + rabbitmq/kafka + redis/mysql + zookeeper
        2.2 部分使用了hystrix进行熔断降级， http接口使用了redisRateLimitor进行限流；
        2.3 监控。业务日志监控报警 + falcon 监控， 日志没有使用聚合工具，没有链路追踪，
    3. 
### 工作中使用的设计模式
1. 工厂方法
2. 责任链模式， 风控代码；
3. 单例模式；
4. 代理模式；
5. 模板方法： asset值计算时，stk，opt等；
6. 监听器模式: ruleSetListener-实现坚挺接口即可
7. 策略模式： 计算费率时，switch(secType),选择不同计算方式；

### tigerbroker项目中难点
1. 使用了rabbitmq，数据的可靠性，一致性，幂等
2. 业务复杂性
3. 潜在高并发；
4. 时效性，check链保证最短时间

### 自己在工作中的优势
1. 代码整洁规范；
2. 对于中间件使用有些心的。
3. 喜欢查看新技术，对技术有热情；
4. 主动push


### 工作中代码重构
1. 参数过多，封装成一个参数类。 下单过程中，参数原来是3个，由于业务，参数逐渐增多，
2. 项目拆分，功能随项目拆除去；
3. previewAsset函数功能多，拆分，单一职能。函数重命名
4. 报警机制，原来是单独报警，但是有很多地方都用了报警，所以用了事件机制来做这件事；把报警封装成事件，有个类单独处理事件
5. 把公共方法抽出来。
6. 原来功能类似；使用代理模式， 把一个service做了代理，根据order类型进行转发；

### 工作中你觉得有哪些问题；
1. 日志问题，
   原来在业务逻辑中日志很多，甚至到了影响阅读源码了。
 解决方式： 使用aop来解决一部分问题。
2. 下单时，根据accountId进行hash路由，如果某一个accountId交易量大，那么某个consumer就会亚历山大。
3. 配置代码
   没有使用统一配置中心，每次修改配置都需要进行重新部署。apollo
4. 代码review时间过长。
5. 测试环境有问题： 
     大量服务化，项目中引用了很多rpc，所以本地很难起起来进行debug，经常要修改本地代码注释掉rpc
     但是又不能在master上注释掉，因为debug的代码处刚好要用这些rpc，目前没有好的办法。
6. 没有使用版本控制，导致测试环境部署很痛苦。
    因为项目组人数多，需求多，但是只有一套测试环境，每次部署测试环境时merge代码都很痛苦。
 
### 项目中有哪些比较好的点
1. 代码规范： 包括方法命名，设计模式， REST风格接口。
2. 大量自测在开发这边，单元测试覆盖比较好。
3. 自定义了很多注解，方便开发， 例如使用@ConfigBean进行配置参数注入， @RetryRabbitListener。

### 线上解决过问题吗
1. 测试环境中解决oom问题，cpu飙升问题。
2. 线上问题解决过死锁问题， 业务问题。

### 为什么离职
1. 我工作3年多，对技术还是很有热情的，想要有一个更好的技术发展空间；在老虎工作两年多，由于国内炒美股的人数不是很多
公司业务稳步发展，公司的技术栈与我的预期不是很一样。
2. 我觉得我与领导的风格不是很搭，平时交流也比较少。在代码上线review过程中，领导提出的意见也是偏向于代码风格上的，对于
技术上的指导也比较少；代码上线周期也很长，个人成就感不高。
3. 所以，我就想出来看看，换个工作。


### 为什么三个月了才找
1. 刚开始i面试不好，后来家里有事回家了

###目前有offer吗
1. 没有。

### 自己的优缺点
1. 优点： 吃苦耐劳，经常思考反思。(技术热情和钻研；喜欢锻炼)
2. 缺点： 比较倔，坚持自己的判断，除非确实是自己错了，否则都想去试试。
         不善于打理自己，审美不行。 


1. 有道比较有挑战的业务。 rabbitmq如何保证一致性
2. 算法： 单链表反转，只用o(1)的时间复杂度。 了解快排吗，原理是什么，使用快排解决topK问题的思路
3. jvm：说说g1垃圾回收器。cms回收器的处理流程；cms已经有了初始标记，为什么还要并发标记；cms有什么缺点
        线上排查oom问题。 full GC发生原因
4. 类加载过程，双亲委派流程，spi破坏委派机制。
5. hashMap的原理， resize()过程；是否线程安全。LinkedHashMap是干什么的，如何排序的。是不是线程安全的。
6. 线程池核心参数。
7. AQS。双端队列是干什么的。信号量和可重入锁怎么实现的。
8. mysql，事务特性理解，如何实现可重复读和隔离性； MVCC机制和间隙锁。 limit优化。

、、

1. 聊业务， 为什么要用rabbitmq，有没有考虑其他mq， 如何保持数据持久化， 数据一致性。
2. 分布式id生成方案有几种，各个优缺点
3. mysql  sql优化，索引为什么能加快数据访问。
4. 自己有什么优缺点，发展规划






### hr面试常规问题
1.目前所在公司得情况，部门情况，部门多少员工, 部门内部做的比较好的, 担任什么角色
2.最有成就感得事情or做得很好得项目，
   介绍项目，问过往的项目，都做了什么，自己在项目中的角色，最后的结果是什么，
   哪个项目做的好
   哪个做的不太好还有提升的空间
   有复盘么，如果给你一次重来的机会你会怎么做
3.看机会得原因， 离职得原因
   呆过几家公司
   下一份工作得期待
4.薪资：目前/期望
5.目前在面哪些家
    如果没有给你offer, 你会考虑投哪些
6.一般会有压力面试，考察抗压能力，喜欢皮实的，看软性素质




















